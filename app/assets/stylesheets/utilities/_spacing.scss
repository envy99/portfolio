$sizeUnit: rem;
$marginKey: "has-margin";
$paddingKey: "has-padding";
$separator: "-";
$sizes: (
  ("none", 0),
  ("xxs", 0.125),
  ("xs", 0.25),
  ("sm", 0.5),
  ("md", 1),
  ("lg", 2),
  ("xl", 4),
  ("xxl", 8),
);
$positions: (
  "top",
  "right",
  "bottom",
  "left"
);
$axes: (
  "horizontal",
  "vertical"
);

@function sizeValue($key, $value) {
  @return if($key == "none", 0, $value + $sizeUnit);
}

@function axisPositions($axis) {
  @if $axis == nth($axes, 1) {
    @return join(nth($positions, 4), nth($positions, 2));
  }
  @else if $axis == nth($axes, 2) {
    @return join(nth($positions, 1), nth($positions, 3));
  }
}

@each $size in $sizes {
  $sizeKey: nth($size, 1);
  $sizeValue: nth($size, 2);

  .#{$marginKey}#{$separator}#{$sizeKey} {
    margin: sizeValue($sizeKey, $sizeValue);
  }
  .#{$paddingKey}#{$separator}#{$sizeKey} {
    padding: sizeValue($sizeKey, $sizeValue);
  }

  @each $axis in $axes {
    $firstPos: nth(axisPositions($axis), 1);
    $secondPos: nth(axisPositions($axis), 2);

    .#{$marginKey}#{$separator}#{$axis}#{$separator}#{$sizeKey} {
      margin-#{$firstPos}: sizeValue($sizeKey, $sizeValue);
      margin-#{$secondPos}: sizeValue($sizeKey, $sizeValue);
    }
    .#{$paddingKey}#{$separator}#{$axis}#{$separator}#{$sizeKey} {
      padding-#{$firstPos}: sizeValue($sizeKey, $sizeValue);
      padding-#{$secondPos}: sizeValue($sizeKey, $sizeValue);
    }
  }

  @each $position in $positions {
    .#{$marginKey}#{$separator}#{$position}#{$separator}#{$sizeKey} {
      margin-#{$position}: sizeValue($sizeKey, $sizeValue);
    }
    .#{$paddingKey}#{$separator}#{$position}#{$separator}#{$sizeKey} {
      padding-#{$position}: sizeValue($sizeKey, $sizeValue);
    }
  }
}
